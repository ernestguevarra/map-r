<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Mapping with R</title>
  <meta name="description" content="Mapping with R">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Mapping with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://validmeasures.org/map-r" />
  <meta property="og:image" content="https://validmeasures.org/map-rfigures/sudanMapTriSim.png" />
  <meta property="og:description" content="Mapping with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Mapping with R" />
  
  <meta name="twitter:description" content="Mapping with R" />
  <meta name="twitter:image" content="https://validmeasures.org/map-rfigures/sudanMapTriSim.png" />

<meta name="author" content="Ernest Guevarra">


<meta name="date" content="2018-10-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="exercise2.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; min-height: 1.25em; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; }
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
pre, code { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; color: initial; }
}
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.bn { color: #0000cf; } /* BaseN */
code span.fl { color: #0000cf; } /* Float */
code span.ch { color: #4e9a06; } /* Char */
code span.st { color: #4e9a06; } /* String */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.ot { color: #8f5902; } /* Other */
code span.al { color: #ef2929; } /* Alert */
code span.fu { color: #000000; } /* Function */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code span.cn { color: #000000; } /* Constant */
code span.sc { color: #000000; } /* SpecialChar */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.im { } /* Import */
code span.va { color: #000000; } /* Variable */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.ex { } /* Extension */
code span.at { color: #c4a000; } /* Attribute */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Mapping with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Short course on the use of R for the mapping requirements of S3M</a></li>
<li class="chapter" data-level="1" data-path="exercise1.html"><a href="exercise1.html"><i class="fa fa-check"></i><b>1</b> Retrieving map data in R</a></li>
<li class="chapter" data-level="2" data-path="exercise2.html"><a href="exercise2.html"><i class="fa fa-check"></i><b>2</b> Plotting maps</a></li>
<li class="chapter" data-level="3" data-path="exercise3.html"><a href="exercise3.html"><i class="fa fa-check"></i><b>3</b> Manipulating shapefile data</a></li>
<li class="divider"></li>
<li></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mapping with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exercise3" class="section level1">
<h1><span class="header-section-number">Exercise 3</span> Manipulating shapefile data</h1>
<p>In this exercise, we will use what we have learned about the structure and features of shapefile data in manipulating the data and creating new map objects.</p>
<p>By now you would have noticed that sudan01 and sudan02 shapefile objects contain data for the whole of Sudan. This is useful for creating maps for the whole country. However, there are times when we would like to create maps of the specific states only or assign colours for certain states differently rather than a single colour for all states.</p>
<p>To do these maps does not require new shapefiles for each of the state. All this needs is some manipulation of the full country map dataset. This is possible because the data structure of shapefiles contains all the data required to map all the features of the overall map separately.</p>
<p>First, let us try to create a map of sudan01 and sudan02 with the states and the localities coloured differently from each other.</p>
<p>A colour palette should be created which would provide colours for each of the states. This can be done using the following commands:</p>
<p> </p>
<pre class="sourceCode r" id="cb43"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">createPalette &lt;-<span class="st"> </span><span class="kw">colorRampPalette</span>(<span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;#FBB4AE&quot;</span>, <span class="st">&quot;#B3CDE3&quot;</span>, <span class="st">&quot;#CCEBC5&quot;</span>, </a>
<a class="sourceLine" id="cb43-2" data-line-number="2">                                             <span class="st">&quot;#DECBE4&quot;</span>, <span class="st">&quot;#FED9A6&quot;</span>, <span class="st">&quot;#FFFFCC&quot;</span>, </a>
<a class="sourceLine" id="cb43-3" data-line-number="3">                                             <span class="st">&quot;#E5D8BD&quot;</span>, <span class="st">&quot;#FDDAEC&quot;</span>, <span class="st">&quot;#F2F2F2&quot;</span>), </a>
<a class="sourceLine" id="cb43-4" data-line-number="4">                                  <span class="dt">space =</span> <span class="st">&quot;Lab&quot;</span>)</a>
<a class="sourceLine" id="cb43-5" data-line-number="5">sudanCol &lt;-<span class="st"> </span><span class="kw">createPalette</span>(<span class="dv">18</span>)</a></code></pre>
<p> </p>
<p>What this command uses the <code>colorRampPalette()</code> function to create a colour palette of 18 unique colours (one for each state). These colours were generated from a base set of 9 colours which in turn was chosen using a qualitative colour scheme from ColorBrewer 2.0 (see <a href="http://www.colorbrewer2.org" class="uri">http://www.colorbrewer2.org</a>).</p>

<p>Once we have a colour palette to use, we now plot the map and use the colour palette to specify the parameter col. This is done as follows:</p>
<p> </p>
<pre class="sourceCode r" id="cb44"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">plot</span>(sudan01, <span class="dt">border =</span> sudanCol, <span class="dt">col =</span> sudanCol)</a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="kw">plot</span>(sudan02, <span class="dt">lwd =</span> <span class="fl">0.5</span>, <span class="dt">lty =</span> <span class="dv">3</span>, <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="kw">plot</span>(sudan01, <span class="dt">lwd =</span> <span class="dv">1</span>, <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="kw">text</span>(<span class="dt">x =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb44-5" data-line-number="5">     <span class="dt">y =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">2</span>],</a>
<a class="sourceLine" id="cb44-6" data-line-number="6">     <span class="dt">labels =</span> sudan01<span class="op">@</span>data<span class="op">$</span>State, </a>
<a class="sourceLine" id="cb44-7" data-line-number="7">     <span class="dt">pos =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb44-8" data-line-number="8">     <span class="dt">offset =</span> <span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb44-9" data-line-number="9">     <span class="dt">cex =</span> <span class="fl">0.8</span>)</a></code></pre>

<p>The resulting map is:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map9"></span>
<img src="figures/map9-1.png" alt="Map of localities and states of Sudan coloured "  />
<p class="caption">
Figure 3.1: Map of localities and states of Sudan coloured
</p>
</div>

<p>Now, let us try to specify a colour to just a handful of the states while the others remain without colour. This is particularly useful when you just want to highlight specific states in the map for presentation purpose or for emphasis.</p>
<p>For this map, we will need to use the <a href="mailto:sudan01@data">sudan01@data</a> slot to steer our selection of the states of interest which we can then specify a colour for. For example, if we want to show the full Sudan map and Gedaref, Northern and Western Kordofan coloured light green, we call the following commands:</p>
<p> </p>
<pre class="sourceCode r" id="cb45"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">plot</span>(sudan01, </a>
<a class="sourceLine" id="cb45-2" data-line-number="2">     <span class="dt">lty =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb45-3" data-line-number="3">     <span class="dt">col =</span> <span class="kw">ifelse</span>(sudan01<span class="op">@</span>data<span class="op">$</span>State <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Gedaref&quot;</span>, </a>
<a class="sourceLine" id="cb45-4" data-line-number="4">                                            <span class="st">&quot;Northern&quot;</span>, </a>
<a class="sourceLine" id="cb45-5" data-line-number="5">                                            <span class="st">&quot;Western Kordofan&quot;</span>), </a>
<a class="sourceLine" id="cb45-6" data-line-number="6">                  <span class="st">&quot;lightgreen&quot;</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb45-7" data-line-number="7"><span class="kw">plot</span>(sudan02, <span class="dt">lwd =</span> <span class="fl">0.5</span>, <span class="dt">lty =</span> <span class="dv">3</span>, <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb45-8" data-line-number="8"><span class="kw">plot</span>(sudan01, <span class="dt">lwd =</span> <span class="dv">1</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb45-9" data-line-number="9"><span class="kw">text</span>(<span class="dt">x =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb45-10" data-line-number="10">     <span class="dt">y =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">2</span>], </a>
<a class="sourceLine" id="cb45-11" data-line-number="11">     <span class="dt">labels =</span> sudan01<span class="op">@</span>data<span class="op">$</span>State, </a>
<a class="sourceLine" id="cb45-12" data-line-number="12">     <span class="dt">pos =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb45-13" data-line-number="13">     <span class="dt">offset =</span> <span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb45-14" data-line-number="14">     <span class="dt">cex =</span> <span class="fl">0.8</span>)</a></code></pre>

<p>The resulting map is:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map10"></span>
<img src="figures/map10-1.png" alt="Map of specific states of Sudan coloured"  />
<p class="caption">
Figure 3.2: Map of specific states of Sudan coloured
</p>
</div>
<p> </p>
<p>There are practical uses for knowing how to manipulate map data so as to change the colour of the components polygons either based on a qualitative criteria (such as different colours for each state to distinguish them from each other) or on numerical data (such as in creating a choropleth map).</p>
<p>The following example of simulated CMAM coverage results per state illustrates this usefullness.</p>

<p>We first simulate the data as follows:</p>
<p> </p>
<pre class="sourceCode r" id="cb46"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">states   &lt;-<span class="st"> </span><span class="kw">as.vector</span>(sudan01<span class="op">@</span>data<span class="op">$</span>State)</a>
<a class="sourceLine" id="cb46-2" data-line-number="2">coverage &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">95</span>, <span class="dv">56</span>, <span class="dv">73</span>, <span class="dv">55</span>, <span class="dv">19</span>, <span class="dv">97</span>, </a>
<a class="sourceLine" id="cb46-3" data-line-number="3">              <span class="dv">60</span>, <span class="dv">2</span>, <span class="dv">46</span>, <span class="dv">31</span>, <span class="dv">70</span>, <span class="dv">23</span>, </a>
<a class="sourceLine" id="cb46-4" data-line-number="4">              <span class="dv">71</span>, <span class="dv">66</span>, <span class="dv">38</span>, <span class="dv">78</span>, <span class="dv">74</span>, <span class="dv">51</span>)</a>
<a class="sourceLine" id="cb46-5" data-line-number="5"></a>
<a class="sourceLine" id="cb46-6" data-line-number="6">exData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(states, coverage)</a>
<a class="sourceLine" id="cb46-7" data-line-number="7"><span class="kw">names</span>(exData) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;states&quot;</span>, <span class="st">&quot;coverage&quot;</span>) </a></code></pre>
<p> </p>
<p>The <code>exData</code> object gives us the simulated of CMAM coverage by state. Then we specify a colour palette as follows:</p>
<p> </p>
<pre class="sourceCode r" id="cb47"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">createMapPalette &lt;-<span class="st"> </span><span class="kw">colorRampPalette</span>(<span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;lightgreen&quot;</span>, </a>
<a class="sourceLine" id="cb47-2" data-line-number="2">                                                <span class="st">&quot;green&quot;</span>, <span class="st">&quot;darkgreen&quot;</span>), </a>
<a class="sourceLine" id="cb47-3" data-line-number="3">                                     <span class="dt">space =</span> <span class="st">&quot;Lab&quot;</span>)</a>
<a class="sourceLine" id="cb47-4" data-line-number="4">mapPalette &lt;-<span class="st"> </span><span class="kw">createMapPalette</span>(<span class="dv">101</span>)</a></code></pre>
<p> </p>
<p>We now can map this data using the folowing commands:</p>
<p> </p>
<pre class="sourceCode r" id="cb48"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">plot</span>(sudan01, <span class="dt">lty =</span> <span class="dv">0</span>, <span class="dt">col =</span> mapPalette[exData<span class="op">$</span>coverage <span class="op">+</span><span class="st"> </span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="kw">plot</span>(sudan02, <span class="dt">lwd =</span> <span class="fl">0.5</span>, <span class="dt">lty =</span> <span class="dv">3</span>, <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="kw">plot</span>(sudan01, <span class="dt">lwd =</span> <span class="dv">1</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="kw">text</span>(<span class="dt">x =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">1</span>], </a>
<a class="sourceLine" id="cb48-5" data-line-number="5">     <span class="dt">y =</span> <span class="kw">coordinates</span>(sudan01)[,<span class="dv">2</span>], </a>
<a class="sourceLine" id="cb48-6" data-line-number="6">     <span class="dt">labels =</span> sudan01<span class="op">@</span>data<span class="op">$</span>State, </a>
<a class="sourceLine" id="cb48-7" data-line-number="7">     <span class="dt">pos =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb48-8" data-line-number="8">     <span class="dt">offset =</span> <span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb48-9" data-line-number="9">     <span class="dt">cex =</span> <span class="fl">0.8</span>)</a></code></pre>

<p>This results in the following map:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map11"></span>
<img src="figures/map11-1.png" alt="Sample coverage map"  />
<p class="caption">
Figure 3.3: Sample coverage map
</p>
</div>
<p> </p>
<p>Finally, we learn how to create maps for each state separately using the <code>sudan01</code> map dataset.</p>
<p>To begin with, let’s try to create and map a map dataset for North Darfur. We call the following commands:</p>
<p> </p>
<pre class="sourceCode r" id="cb49"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">nDarfur &lt;-<span class="st"> </span><span class="kw">subset</span>(sudan01, sudan01<span class="op">@</span>data<span class="op">$</span>State <span class="op">==</span><span class="st"> &quot;North Darfur&quot;</span>)</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="kw">plot</span>(nDarfur)</a></code></pre>

<p>To produce the following:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map12"></span>
<img src="figures/map12-1.png" alt="Map of North Darfur, Sudan"  />
<p class="caption">
Figure 3.4: Map of North Darfur, Sudan
</p>
</div>

<p>However, this map will look better if we can also show the nearby states and their boundaries. We can do this by plotting <code>sudan01</code> but this time specifying a <code>xlim</code> and <code>ylim</code> parameters using the <code>bbox()</code> of the map object for North Darfur. The following commands illustrate this:</p>
<p> </p>
<pre class="sourceCode r" id="cb50"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">nDarfur &lt;-<span class="st"> </span><span class="kw">subset</span>(sudan01, sudan01<span class="op">@</span>data<span class="op">$</span>State <span class="op">==</span><span class="st"> &quot;North Darfur&quot;</span>)</a>
<a class="sourceLine" id="cb50-2" data-line-number="2">ndLimits &lt;-<span class="st"> </span><span class="kw">bbox</span>(nDarfur)</a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="kw">plot</span>(sudan01, </a>
<a class="sourceLine" id="cb50-4" data-line-number="4">     <span class="dt">xlim =</span> ndLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb50-5" data-line-number="5">     <span class="dt">ylim =</span> ndLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb50-6" data-line-number="6">     <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>)</a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="kw">plot</span>(nDarfur, </a>
<a class="sourceLine" id="cb50-8" data-line-number="8">     <span class="dt">xlim =</span> ndLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb50-9" data-line-number="9">     <span class="dt">ylim =</span> ndLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb50-10" data-line-number="10">     <span class="dt">border =</span> <span class="st">&quot;blue&quot;</span>, </a>
<a class="sourceLine" id="cb50-11" data-line-number="11">     <span class="dt">add =</span> <span class="ot">TRUE</span>)</a></code></pre>

<p>The resulting map is:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map13"></span>
<img src="figures/map13-1.png" alt="Map of North Darfur, Sudan"  />
<p class="caption">
Figure 3.5: Map of North Darfur, Sudan
</p>
</div>

<p>We can apply the same approach to get the map for each of the states. However, we can also create a looping function that will create and plot the maps for us automatically. This can be done as follows:</p>
<p> </p>
<pre class="sourceCode r" id="cb51"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">stateList &lt;-<span class="st"> </span><span class="kw">as.vector</span>(sudan01<span class="op">@</span>data<span class="op">$</span>State)</a>
<a class="sourceLine" id="cb51-2" data-line-number="2"></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(sudan01<span class="op">@</span>data)) {</a>
<a class="sourceLine" id="cb51-4" data-line-number="4">  a &lt;-<span class="st"> </span><span class="kw">subset</span>(sudan01, sudan01<span class="op">@</span>data<span class="op">$</span>State <span class="op">==</span><span class="st"> </span>stateList[i])</a>
<a class="sourceLine" id="cb51-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb51-6" data-line-number="6">  aLimits &lt;-<span class="st"> </span><span class="kw">bbox</span>(a)</a>
<a class="sourceLine" id="cb51-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb51-8" data-line-number="8">  <span class="kw">plot</span>(sudan01, </a>
<a class="sourceLine" id="cb51-9" data-line-number="9">       <span class="dt">xlim =</span> aLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb51-10" data-line-number="10">       <span class="dt">ylim =</span> aLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb51-11" data-line-number="11">       <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>)</a>
<a class="sourceLine" id="cb51-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb51-13" data-line-number="13">  <span class="kw">plot</span>(a, </a>
<a class="sourceLine" id="cb51-14" data-line-number="14">       <span class="dt">xlim =</span> aLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb51-15" data-line-number="15">       <span class="dt">ylim =</span> aLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb51-16" data-line-number="16">       <span class="dt">border =</span> <span class="st">&quot;blue&quot;</span>, </a>
<a class="sourceLine" id="cb51-17" data-line-number="17">       <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb51-18" data-line-number="18">  </a>
<a class="sourceLine" id="cb51-19" data-line-number="19">  <span class="kw">points</span>(villages<span class="op">$</span>X, villages<span class="op">$</span>Y, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">cex =</span> <span class="fl">0.3</span>, <span class="dt">col =</span> <span class="st">&quot;gray90&quot;</span>)</a>
<a class="sourceLine" id="cb51-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb51-21" data-line-number="21">  <span class="kw">title</span>(<span class="dt">main =</span> stateList[i], <span class="dt">cex =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb51-22" data-line-number="22">}</a></code></pre>

<p>The commands above will create a plot of the individual state maps on separate graphics device which can be saved one by one. An example of the maps is below.</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map14"></span>
<img src="figures/map14-1.png" alt="Map of Al Gezira State, Sudan"  />
<p class="caption">
Figure 3.6: Map of Al Gezira State, Sudan
</p>
</div>

<p>The other approach is to plot each of the individual state map on the same graphics device. This can be done using the following commands:</p>
<p> </p>
<pre class="sourceCode r" id="cb52"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">stateList &lt;-<span class="st"> </span><span class="kw">as.vector</span>(sudan01<span class="op">@</span>data<span class="op">$</span>State)</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)); <span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb52-4" data-line-number="4"></a>
<a class="sourceLine" id="cb52-5" data-line-number="5"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(sudan01<span class="op">@</span>data)) {</a>
<a class="sourceLine" id="cb52-6" data-line-number="6">  a &lt;-<span class="st"> </span><span class="kw">subset</span>(sudan01, sudan01<span class="op">@</span>data<span class="op">$</span>State <span class="op">==</span><span class="st"> </span>stateList[i])</a>
<a class="sourceLine" id="cb52-7" data-line-number="7">  aLimits &lt;-<span class="st"> </span><span class="kw">bbox</span>(a)</a>
<a class="sourceLine" id="cb52-8" data-line-number="8">    </a>
<a class="sourceLine" id="cb52-9" data-line-number="9">  <span class="kw">plot</span>(sudan01, </a>
<a class="sourceLine" id="cb52-10" data-line-number="10">       <span class="dt">xlim =</span> aLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb52-11" data-line-number="11">       <span class="dt">ylim =</span> aLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb52-12" data-line-number="12">       <span class="dt">border =</span> <span class="st">&quot;gray&quot;</span>)</a>
<a class="sourceLine" id="cb52-13" data-line-number="13">      </a>
<a class="sourceLine" id="cb52-14" data-line-number="14">  <span class="kw">plot</span>(a, </a>
<a class="sourceLine" id="cb52-15" data-line-number="15">       <span class="dt">xlim =</span> aLimits[<span class="dv">1</span>,], </a>
<a class="sourceLine" id="cb52-16" data-line-number="16">       <span class="dt">ylim =</span> aLimits[<span class="dv">2</span>,], </a>
<a class="sourceLine" id="cb52-17" data-line-number="17">       <span class="dt">lwd =</span> <span class="dv">2</span>, </a>
<a class="sourceLine" id="cb52-18" data-line-number="18">       <span class="dt">border =</span> <span class="st">&quot;blue&quot;</span>, </a>
<a class="sourceLine" id="cb52-19" data-line-number="19">       <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb52-20" data-line-number="20">  </a>
<a class="sourceLine" id="cb52-21" data-line-number="21">  <span class="kw">points</span>(<span class="dt">x =</span> villages<span class="op">$</span>X, </a>
<a class="sourceLine" id="cb52-22" data-line-number="22">         <span class="dt">y =</span> villages<span class="op">$</span>Y, </a>
<a class="sourceLine" id="cb52-23" data-line-number="23">         <span class="dt">pch =</span> <span class="dv">20</span>, </a>
<a class="sourceLine" id="cb52-24" data-line-number="24">         <span class="dt">cex =</span> <span class="fl">0.3</span>, </a>
<a class="sourceLine" id="cb52-25" data-line-number="25">         <span class="dt">col =</span> <span class="st">&quot;gray90&quot;</span>)</a>
<a class="sourceLine" id="cb52-26" data-line-number="26">  </a>
<a class="sourceLine" id="cb52-27" data-line-number="27">  <span class="kw">title</span>(<span class="dt">main =</span> <span class="kw">paste</span>(stateList[i], <span class="st">&quot;State&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>), <span class="dt">cex =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb52-28" data-line-number="28">}</a></code></pre>

<p>The resulting map is:</p>
<p> </p>
<div class="figure" style="text-align: center"><span id="fig:map15"></span>
<img src="figures/map15-1.png" alt="Map for each state of Sudan"  />
<p class="caption">
Figure 3.7: Map for each state of Sudan
</p>
</div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="exercise2.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["map-r.pdf", "map-r.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
